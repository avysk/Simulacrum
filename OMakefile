.PHONY: clean

OCAMLFLAGS += -w Ae
OCAMLINCLUDES += definitions/ user_strategies/

.SUBDIRS: definitions meta_strategies user_strategies

FILES[] =
	simulacrum
OCAML_LIBS[] +=
	definitions/libdefinitions
	meta_strategies/libmetastrategies
	user_strategies/libuserstrategies

PROGRAM = simulacrum

.DEFAULT: $(OCamlProgram $(PROGRAM), $(FILES))

clean:
	rm -f \
		$(filter-proper-targets $(glob $(addsuffix .*, $(FILES)))) \
		$(PROGRAM).run $(PROGRAM).opt $(PROGRAM)
